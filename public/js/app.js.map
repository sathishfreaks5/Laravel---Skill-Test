{"version":3,"sources":["app.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app.js","sourcesContent":["/**\n * Convert error message object\n * to html list\n *\n * @param messages\n * @returns {string}\n */\nfunction convertToHtmlList(messages) {\n    var htmlErrorMess;\n    htmlErrorMess = '<div class=\"alert alert-danger\">';\n    htmlErrorMess += '<ul>';\n\n    for (var prop in messages) {\n        htmlErrorMess += '<li>' + messages[prop] + '</li>';\n    }\n    htmlErrorMess += '</ul></div>';\n\n    return htmlErrorMess;\n}\n\n/**\n * Display alert with validation errors\n *\n * @param message\n */\nfunction displayErrors(message) {\n    swal({\n        title: 'Validation Errors',\n        text: message,\n        type: 'error',\n        confirmButtonText: 'Okay',\n        html: true\n    });\n}\n\nfunction deleteWindow() {\n    swal({\n        title: \"Are you sure?\",\n        text: \"You will not be able to recover product data!\",\n        type: \"warning\",\n        showCancelButton: true,\n        confirmButtonColor: \"#DD6B55\",\n        confirmButtonText: \"Yes, delete it!\",\n        cancelButtonText: \"No, cancel plx!\",\n        closeOnConfirm: false,\n        closeOnCancel: false\n    }, function (isConfirm) {\n        if (isConfirm) {\n            $(\"#form-products\").submit();\n            swal(\"Deleted!\", \"Your product data has been deleted.\", \"success\");\n        } else {\n            swal(\"Cancelled\", \"Your product data is safe :)\", \"error\");\n            $(\"#clear-action\").click();\n        }\n    });\n}\n\njQuery(document).ready(function ($) {\n\n    // clear form and redirect to home\n    $(\"#clear-action\").on('click', function () {\n        $('#form-products').find('input:text').val('');\n        window.location = \"/\";\n    });\n\n    // delete button with confirmation\n    $(\"#delete-action\").on('click', function () {\n      deleteWindow();\n    });\n\n    $(\"#form-products\").on('submit', function (ev) {\n        //prevent the form from actually submitting in browser\n        ev.preventDefault();\n\n        var data = {\n            \"_token\": $(this).find('input[name=_token]').val(),\n            \"name\": $(\"#name\").val(),\n            \"quantity\": $(\"#quantity\").val(),\n            \"price\": $(\"#price\").val()\n        };\n\n        var method = $(this).attr('method');\n        var url = $(this).attr('action');\n\n        $.ajax(\n            {\n                url: url,\n                dataType: \"html\",\n                type: method,\n                data: data,\n                success: function (result) {\n                    $(\"#products-list\").html(result);\n                    $(\"#clear-action\").click();\n                },\n                error: function (request, status, error) {\n                    var messages = JSON.parse(request.responseText);\n                    var htmlMessages = convertToHtmlList(messages);\n                    displayErrors(htmlMessages);\n                }\n            });\n\n\n    });\n});\n"],"sourceRoot":"/source/"}